parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"2yPK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return Math.PI/180*e};exports.default=e;
},{}],"55vB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e.x<600&&e.x>-50&&e.y<400&&e.y>-20};exports.default=e;
},{}],"skEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Actor=void 0;var t=function(){return function(t){this.position=t}}();exports.Actor=t;
},{}],"Fwmt":[function(require,module,exports) {
module.exports="/ferrari.e645e047.png";
},{}],"iNbh":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("../utils/angle2rad")),i=e(require("../utils/checkLimits")),o=require("../Actor"),n=require("../../assets/ferrari.png"),a=function(e){function o(t,r){void 0===t&&(t={x:100,y:100}),void 0===r&&(r={w:10,h:15});var i=e.call(this,t)||this;return i.carSize=r,i.carColor="red",i.angle=0,i.angleSpeed=0,i.carSpeed=0,i.carAcceleration=0,i.image=new Image,i.image.src=n,i}return t(o,e),o.prototype.update=function(t){this.angle+=this.angleSpeed,this.angleSpeed*=.9,this.carSpeed=.9*this.carSpeed+this.carAcceleration;var e={x:this.position.x+Math.cos(r.default(this.angle))*this.carSpeed,y:this.position.y+Math.sin(r.default(this.angle))*this.carSpeed};i.default(e)&&(this.position=e)},o.prototype.draw=function(t){t.translate(this.position.x,this.position.y),t.rotate(r.default(this.angle)),t.fillStyle=this.carColor,t.rotate(r.default(180)),t.drawImage(this.image,-25,-13.5,50,25),t.fillRect(-this.carSize.h/2,-this.carSize.w/2,this.carSize.h,this.carSize.w)},o.prototype.keyboardEventDown=function(t){"ArrowLeft"===t?this.angleSpeed=-4:"ArrowRight"===t?this.angleSpeed=4:"ArrowUp"===t?this.carAcceleration=1:"ArrowDown"===t&&(this.carAcceleration=-1)},o.prototype.keyboardEventUp=function(t){"ArrowUp"===t?this.carAcceleration=0:"ArrowDown"===t&&(this.carAcceleration=0)},o}(o.Actor);exports.default=a;
},{"../utils/angle2rad":"2yPK","../utils/checkLimits":"55vB","../Actor":"skEj","../../assets/ferrari.png":"Fwmt"}],"W0xL":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Barrier=void 0;var e=require("../Actor"),o=r(require("../utils/angle2rad")),i=require("../state/CircuitManager"),n=30,a=function(r){function e(t,e,o,i,n){void 0===t&&(t={x:0,y:0}),void 0===e&&(e=60),void 0===o&&(o=0);var a=r.call(this,t)||this;return a.pos=t,a.barrierWidth=e,a.angle=o,a.touched=!1,a.coche=i,a.barrier_index=n,a}return t(e,r),e.prototype.update=function(t){if(i.Circuit.current_barrier===this.barrier_index){var r=this.position,e=this.coche.position;Math.round(Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2)))<=n&&(this.touched=!0,i.Circuit.setLastTouchedBarrier(this.barrier_index))}},e.prototype.draw=function(t){t.translate(this.pos.x,this.pos.y),t.rotate(o.default(this.angle)),this.touched?t.strokeStyle="green":t.strokeStyle="black",t.lineWidth=1,t.beginPath(),t.moveTo(-this.barrierWidth/2,0),t.lineTo(this.barrierWidth/2,0),t.moveTo(0,0),t.arc(0,0,3,0,o.default(360)),t.closePath(),t.stroke(),t.fillText("("+this.barrier_index+")",0,10)},e.prototype.keyboardEventDown=function(t){},e.prototype.keyboardEventUp=function(t){},e}(e.Actor);exports.Barrier=a;
},{"../Actor":"skEj","../utils/angle2rad":"2yPK","../state/CircuitManager":"/xWT"}],"/xWT":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.create_circuit=exports.Circuit=void 0;var e=require("../Actor"),o=require("../actors/Barrier"),i=r(require("../utils/angle2rad")),n=function(r){function e(t){var e=r.call(this,{x:10,y:20})||this;e.barriers=[],e.current_barrier=0,e.total_laps=1,e.chrono=0,e.laps=0;for(var n=300,s=200,a=0;a<20;a++){var c=18*a+90;e.barriers.push(new o.Barrier({x:n+200*Math.sin(i.default(c)),y:s+200*Math.cos(i.default(c))},80,90-c,t,a))}return e}return t(e,r),e.prototype.update=function(t){this.barriers.filter(function(t){return t.touched}).length===this.barriers.length&&this.nextLap(),this.chrono+=.04},e.prototype.setLastTouchedBarrier=function(t){this.current_barrier=t+1},e.prototype.nextLap=function(){this.barriers.forEach(function(t){t.touched=!1}),this.current_barrier=0,this.laps+=1,this.laps===this.total_laps&&alert("COMPLELTED "+this.get_chrono())},e.prototype.get_chrono=function(){return this.chrono.toFixed(2)},e.prototype.draw=function(t){t.translate(this.position.x,this.position.y),t.font="20px Arial",t.fillStyle="black",t.fillText("LAPS: "+(this.laps+1)+"/"+this.total_laps+" CHRONO "+this.get_chrono(),0,0)},e}(e.Actor),s=function(t){exports.Circuit=new n(t)};exports.create_circuit=s;
},{"../Actor":"skEj","../actors/Barrier":"W0xL","../utils/angle2rad":"2yPK"}],"dgAm":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("./actors/Car")),n=require("./state/CircuitManager");window.addEventListener("load",function(){var t=document.getElementById("root").getContext("2d"),o=new r.default({x:500,y:200});n.create_circuit(o);var a=e([o,n.Circuit],n.Circuit.barriers),i=0;setInterval(function(){t.clearRect(0,0,600,400),a.forEach(function(e){return e.update(i)}),a.forEach(function(e){t.save(),e.draw(t),t.restore()}),i+=1},40),window.addEventListener("keydown",function(e){a.forEach(function(t){t.keyboardEventDown&&t.keyboardEventDown(e.key)})}),window.addEventListener("keyup",function(e){a.forEach(function(t){return t.keyboardEventUp&&t.keyboardEventUp(e.key)})})});
},{"./actors/Car":"iNbh","./state/CircuitManager":"/xWT"}]},{},["dgAm"], null)
//# sourceMappingURL=/game.5ec74c74.js.map